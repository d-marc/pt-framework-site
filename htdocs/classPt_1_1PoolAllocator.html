<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>PoolAllocator Class Reference</title>
  <meta content="Pt Reference Manual" name="description">
  <meta content="The Pt Development Team" name="author">
  <link rel="stylesheet" href="doxygen.css" type="text/css">
</head>
<body style="margin:0px;">
<div id="container">
<div id="top"> <!-- do not remove this div, it is closed by doxygen! -->
<div id="header">
    <table id="logo">
        <tr>
            <td>
                <a href="../index.html"><img src="platinum-logo.gif" border="0"/></a>
            </td>
            <td>
                <h3>The Power in your Hands</h3>
            </td>
        </tr>
    </table>
    <div class="search">
        <form action="http://search.freefind.com/find.html" method="get" accept-charset="utf-8" target="_self">
          <p style="margin: 0; padding-top:2px; padding-bottom:2px;"><b>Search Site:</b></p>
          <p style="margin: 0; padding:0;">
            <input type="hidden" name="si" value="43943317">
            <input type="hidden" name="pid" value="r">
            <input type="hidden" name="n" value="0">
            <input type="hidden" name="_charset_" value="">
            <input type="hidden" name="bcd" value="&#247;">
            <input style="background-color: #FFFFFF;
                          border: 1px solid #ffffff;
                          font-size: 12px;
                          width: 160px"
                   type="text" name="query" value="Search...">
          </p>
        </form>
    </div>
	<div class="header-menu">
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../index.html">About</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../features-modules.html">Features</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../docs.html">Documentation</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../downloads.html">Download</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../community.html">Community</a> </div>
	</div>
  </div>
<div class="header-submenu" style="padding-left: 146px;">  
    <div class="header-submenu-term"><img src="sub_left.png" width="4" height="20" /></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="../docs.html">Main</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="classes.html">Classes</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="namespaces.html">Namespaces</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="modules.html">Modules</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-term"><img src="sub_right.png" width="4" height="20" /></div>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacePt.html">Pt</a></li><li class="navelem"><a class="el" href="classPt_1_1PoolAllocator.html">PoolAllocator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">PoolAllocator Class Reference<div class="ingroups"><a class="el" href="group__Allocator.html">Allocators</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="PoolAllocator_8h_source.html">Pt/PoolAllocator.h</a>&gt;</code></p>

<p>Pool based allocator.  
 <a href="classPt_1_1PoolAllocator.html#details">More...</a></p>

<p>Inherits <a class="el" href="classPt_1_1Allocator.html">Allocator</a>, and <a class="el" href="classPt_1_1NonCopyable.html">NonCopyable</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aeebc7c51eb75361ef82a8ddf6acd6668"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeebc7c51eb75361ef82a8ddf6acd6668"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPt_1_1PoolAllocator.html#aeebc7c51eb75361ef82a8ddf6acd6668">PoolAllocator</a> (std::size_t maxSize, std::size_t align=16, std::size_t maxBlock=8192)</td></tr>
<tr class="memdesc:aeebc7c51eb75361ef82a8ddf6acd6668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contruct with maximum record size, alignment and block size. <br/></td></tr>
<tr class="separator:aeebc7c51eb75361ef82a8ddf6acd6668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f4d858c4b8f42152e6f5236df77e56c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2f4d858c4b8f42152e6f5236df77e56c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPt_1_1PoolAllocator.html#a2f4d858c4b8f42152e6f5236df77e56c">~PoolAllocator</a> ()</td></tr>
<tr class="memdesc:a2f4d858c4b8f42152e6f5236df77e56c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr class="separator:a2f4d858c4b8f42152e6f5236df77e56c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af83952b079b53b02e54bec08207e7cac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af83952b079b53b02e54bec08207e7cac"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPt_1_1PoolAllocator.html#af83952b079b53b02e54bec08207e7cac">allocate</a> (std::size_t size)</td></tr>
<tr class="memdesc:af83952b079b53b02e54bec08207e7cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates <em>size</em> bytes of memory. <br/></td></tr>
<tr class="separator:af83952b079b53b02e54bec08207e7cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4377c938fe183435f7f4cfaa5227073"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4377c938fe183435f7f4cfaa5227073"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPt_1_1PoolAllocator.html#aa4377c938fe183435f7f4cfaa5227073">deallocate</a> (void *p, std::size_t size)</td></tr>
<tr class="memdesc:aa4377c938fe183435f7f4cfaa5227073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocates memory of <em>size</em> bytes. <br/></td></tr>
<tr class="separator:aa4377c938fe183435f7f4cfaa5227073"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classPt_1_1PoolAllocator.html">PoolAllocator</a> uses pools to allocate memory. Each pool consists of blocks of equally sized records, which can be used for allocations up to the size of a record. The record sizes increase from pool to pool. When memory is allocated, a record is used from the pool, which handles the requested size. When memory is deallocated, the record is returned to the corresponding pool. This method of allocation is effective, because larger blocks of memory are allocated and then reused in the form of many smaller records. An advantage of this kind of allocator, compared to free list based allocators, is that it is able to release completely unused blocks.</p>
<div class="fragment"><div class="line"><span class="comment">// Contruct with max. record size, alignment and block size</span></div>
<div class="line"><a class="code" href="classPt_1_1PoolAllocator.html">Pt::PoolAllocator</a> allocator(32, 8, 4096);</div>
<div class="line"></div>
<div class="line"><span class="comment">// will use a record from the pools</span></div>
<div class="line"><span class="keywordtype">void</span>* p1 = allocator.<a class="code" href="classPt_1_1PageAllocator.html#af83952b079b53b02e54bec08207e7cac">allocate</a>( <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) );</div>
<div class="line"></div>
<div class="line"><span class="comment">// too large, will use operator new</span></div>
<div class="line"><span class="keywordtype">void</span>* p2 = allocator.<a class="code" href="classPt_1_1PageAllocator.html#af83952b079b53b02e54bec08207e7cac">allocate</a>( 64 );</div>
</div><!-- fragment --><p>When a <a class="el" href="classPt_1_1PoolAllocator.html" title="Pool based allocator. ">PoolAllocator</a> is constructed, the maximum size for records has to be specified. The reason for this is that this type of allocator is ineffective for large allocations. Therefore, memory which is larger than this limit will be allocated using the new operator, instead of a record from a memory pool. Optionally, the alignment and the maximum block size can be set. The record sizes of the pools will be multiples of the alignment. So if the alignment is 8, the first pool will have records of size 8, the second pool records of size 16 and so forth, until the maximum size is reached. The maximum block size controls the number of records per block. A new block of records is added, when a pool is depleted and has to be extended to allow more allocations. </p>
</div></div><!-- contents -->

<div class="clear">&nbsp;</div>
<div id="footer">
	<div style="float:left;">Copyright &copy; 2003-2014 The Pt Development Team</div>
</div>
</div>
</body>
</html>
