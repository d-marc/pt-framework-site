<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Jam Tutorial</title>
  <meta content="Pt Reference Manual" name="description">
  <meta content="The Pt Development Team" name="author">
  <link rel="stylesheet" href="doxygen.css" type="text/css">
</head>
<body style="margin:0px;">
<div id="container">
<div id="top"> <!-- do not remove this div, it is closed by doxygen! -->
<div id="header">
    <table id="logo">
        <tr>
            <td>
                <a href="../index.html"><img src="platinum-logo.gif" border="0"/></a>
            </td>
            <td>
                <h3>The Power in your Hands</h3>
            </td>
        </tr>
    </table>
    <div class="search">
        <form action="http://search.freefind.com/find.html" method="get" accept-charset="utf-8" target="_self">
          <p style="margin: 0; padding-top:2px; padding-bottom:2px;"><b>Search Site:</b></p>
          <p style="margin: 0; padding:0;">
            <input type="hidden" name="si" value="43943317">
            <input type="hidden" name="pid" value="r">
            <input type="hidden" name="n" value="0">
            <input type="hidden" name="_charset_" value="">
            <input type="hidden" name="bcd" value="&#247;">
            <input style="background-color: #FFFFFF;
                          border: 1px solid #ffffff;
                          font-size: 12px;
                          width: 160px"
                   type="text" name="query" value="Search...">
          </p>
        </form>
    </div>
	<div class="header-menu">
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../index.html">About</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../features-modules.html">Features</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../docs.html">Documentation</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../downloads.html">Download</a> </div>
		<div class="header-menu-entry-sep"></div>
		<div class="header-menu-entry"> 
            <a id="header-menu-link" href="../community.html">Community</a> </div>
	</div>
  </div>
<div class="header-submenu" style="padding-left: 146px;">  
    <div class="header-submenu-term"><img src="sub_left.png" width="4" height="20" /></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="../docs.html">Main</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="classes.html">Classes</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="namespaces.html">Namespaces</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-entry">
        <a id="header-submenu-link" href="modules.html">Modules</a></div>
	<div class="header-submenu-entry-sep"></div>
    <div class="header-submenu-term"><img src="sub_right.png" width="4" height="20" /></div>
</div>
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Jam Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="JamTutorialJambase"></a>
Adding Jam Support</h1>
<p>This tutorial will show you how to create a project with a self-contained jam based build system. Therefore, you do not have to install anything on the build host, but include all the necessary files with your project. We start with an empty directroy, from now on referred to as the project root, in which we place all sources, headers and the files required for building with jam. The first thing to do is to add a Jambase and the other required support files to your project. You can get them here: <a href="http://svn.code.sf.net/p/pt-framework/svn/trunk/">http://svn.code.sf.net/p/pt-framework/svn/trunk/</a></p>
<p>Your project directory should now contain the following files:</p>
<pre class="fragment">- [jam]
    - Jambase
    - ... (jam implementation files)
- Jambase
- jam.sh
- jam.bat
</pre><p>The file Jambase in the project root references the files in the jam support directory and both are also referred to as the Jambase. The jam support directory includes the implementation details of the jam-based build system and the jam sources used for bootstrapping the build tool. To provide a completely self-contained build system, we also have to make the jam tool available. For Windows hosts, there is a precompiled jam binary in the jam directory named jam.exe, which is called from jam.bat. For Unix hosts we add a simple wrapper shell script named jam.sh. This script bootstraps and runs the jam program on unix systems, so we don't have to include all possible jam binaries with our project, but rather build them on demand.</p>
<p>All examples in this tutorial will use the script jam.sh, when commands are shown. If you want to take this tutorial on a Windows build host, simply run jam.bat instead of jam.sh, with the exact same arguments. Unless noted otherwise, the jam tool is run from the project root directory.</p>
<h1><a class="anchor" id="JamTutorialBuildPrograms"></a>
Building Programs</h1>
<p>Let us use jam now to build a simple hello world program. To do so we need to add three project specific files named Jamconfigure, Jamrules and Jamfile. After adding these three files (empty for now), your project directory should now contain the following files:</p>
<pre class="fragment">- [jam]
    - Jambase
    - ... (jam implementation files)
- Jambase
- jam.sh
- jam.bat
- Jamconfigure
- Jamrules
- Jamfile
</pre><p>Before a project can be built, it needs to be configured, so the build host properties are determined, the toolset is detected etc. The input for this 'configure' step is the file named Jamconfigure. Add the following lines to that file:</p>
<div class="fragment"><div class="line">SubDir MY_TOP ;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># configure basic C compiler</span></div>
<div class="line"><span class="preprocessor"></span>ConfigureCc ;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># configure basic C++ compiler</span></div>
<div class="line"><span class="preprocessor">ConfigureC++ ;</span></div>
</div><!-- fragment --><p>The SubDir rule defines the so-called root variable, which stands for the project root directory. You can think of this for now simply as the path to your project root directory. The SubDir rule also sets the directory context for the following statements, until the next SubDir call. It will be more useful when another project is included as a sub tree. So far, we only need to configure basic C and C++ support. This allows us to build programs, static libraries and shared libraries using standard C and C++. You should be able to run the configure step now sucessfully with this command:</p>
<pre class="fragment">./jam.sh configure
</pre><p>The script jam.sh must have the executable bit set. If this is not the case you can add it by executing chmod +x jam.sh. Remember, that you need to run jam.exe instead of jam.sh on windows systems.</p>
<p>After the build configuration, we can build targets such as our hello world program. The build targets are defined in the file called Jamfile in the project root, which is picked up by jam during the build step. Add the following lines to your Jamfile:</p>
<div class="fragment"><div class="line">SubDir MY_TOP ;</div>
<div class="line">Main hello : main.cpp ;</div>
</div><!-- fragment --><p>This Jamfile uses the Main rule to build program named 'hello' from the source file main.cpp. The SubDir rule defines the root variable and sets the directory context for the following statements, just like it was done in the Jamconfigure file. Thus, main.cpp will be looked for in the project root. If you run jam now, a program will be built named 'hello' on Unix or 'hello.exe' on windows, respectively.</p>
<pre class="fragment">./jam.sh -q
</pre><p>The command line parameter -q will stop the build on the first error. If you leave it out, the build step will continue, and skip the targets that fail to build.</p>
<h1><a class="anchor" id="JamTutorialClean"></a>
Cleaning the Build</h1>
<p>Jam can not only build programs, but also delete all previously built targets from your project directory. To do so you need to execute jam with the clean target:</p>
<pre class="fragment">  ./jam.sh clean
</pre> </div></div><!-- contents -->

<div class="clear">&nbsp;</div>
<div id="footer">
	<div style="float:left;">Copyright &copy; 2003-2014 The Pt Development Team</div>
</div>
</div>
</body>
</html>
